(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3042:function(e,t,l){Promise.resolve().then(l.bind(l,1267)),Promise.resolve().then(l.bind(l,1523)),Promise.resolve().then(l.bind(l,49))},1267:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return F}});var a=l(7437),o=l(2265),n=l(3011),r=l(6885);let s=["#6366f1","#ec4899","#f59e0b","#10b981","#3b82f6","#ef4444","#8b5cf6","#06b6d4","#f97316","#84cc16"],i=()=>"node_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),d=e=>({id:e.id||i(),parentId:null,position:{x:0,y:0},collapsed:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),...e}),c=()=>{let e=new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),t=new Date(Date.now()-864e5).toISOString(),l=d({id:"df_tasks_root",label:"My Workspace",color:"#6366f1",isRoot:!0}),a=d({id:"df_tasks_p1",label:"Design System",color:"#ec4899",parentId:l.id,position:{x:320,y:-160}}),o=d({id:"df_tasks_p2",label:"Backend API",color:"#10b981",parentId:l.id,position:{x:320,y:160}}),n=d({id:"df_tasks_t1",label:"Create color palette",color:"#ec4899",parentId:a.id,position:{x:620,y:-260},status:"done",priority:"normal"}),r=d({id:"df_tasks_t2",label:"Design components",color:"#ec4899",parentId:a.id,position:{x:620,y:-160},status:"doing",priority:"high"}),s=d({id:"df_tasks_t3",label:"Build auth endpoints",color:"#10b981",parentId:o.id,position:{x:620,y:100},status:"todo",priority:"urgent",deadline:t}),i=d({id:"df_tasks_t4",label:"Database schema",color:"#10b981",parentId:o.id,position:{x:620,y:200},status:"doing",priority:"high"}),c=d({id:"df_plan_root",label:e,color:"#f59e0b",isRoot:!0}),u=d({id:"df_plan_morning",label:"Morning",color:"#f59e0b",parentId:c.id,position:{x:-220,y:-200}}),x=d({id:"df_plan_afternoon",label:"Afternoon",color:"#3b82f6",parentId:c.id,position:{x:220,y:-200}}),b=d({id:"df_plan_evening",label:"Evening",color:"#8b5cf6",parentId:c.id,position:{x:220,y:200}}),p=d({id:"df_plan_someday",label:"Someday",color:"#6b7280",parentId:c.id,position:{x:-220,y:200}}),g=d({id:"df_plan_pm1",label:"Review PRs",color:"#f59e0b",parentId:u.id,position:{x:-420,y:-280},estimatedTime:30,completed:!1}),f=d({id:"df_plan_pm2",label:"Team standup",color:"#f59e0b",parentId:u.id,position:{x:-420,y:-180},estimatedTime:15,completed:!0}),m=d({id:"df_goals_root",label:"2024 Goals",color:"#6366f1",isRoot:!0}),h=d({id:"df_goals_g1",label:"Revenue",color:"#10b981",parentId:m.id,position:{x:300,y:-200},targetValue:1e5,currentValue:67e3}),y=d({id:"df_goals_g2",label:"Fitness",color:"#ec4899",parentId:m.id,position:{x:-300,y:-200},targetValue:50,currentValue:32}),v=d({id:"df_goals_g3",label:"Learning",color:"#f59e0b",parentId:m.id,position:{x:0,y:280},targetValue:24,currentValue:18}),k=d({id:"df_goals_g1a",label:"Q3: $42K",color:"#10b981",parentId:h.id,position:{x:540,y:-260},targetValue:42e3,currentValue:42e3}),j=d({id:"df_goals_g1b",label:"Q4: $33K",color:"#10b981",parentId:h.id,position:{x:540,y:-160},targetValue:33e3,currentValue:25e3}),N=d({id:"df_know_root",label:"My Knowledge",color:"#06b6d4",isRoot:!0}),w=d({id:"df_know_k1",label:"Development",color:"#3b82f6",parentId:N.id,position:{x:300,y:-200}}),D=d({id:"df_know_k2",label:"Product",color:"#ec4899",parentId:N.id,position:{x:-300,y:-200}}),C=d({id:"df_know_k3",label:"Business",color:"#10b981",parentId:N.id,position:{x:0,y:280}}),S=d({id:"df_know_kn1",label:"React Patterns",color:"#3b82f6",parentId:w.id,position:{x:560,y:-280},notes:"Key React patterns: compound components, render props, custom hooks. Use composition over inheritance. Prefer controlled components for forms.",tags:["react","frontend"]}),M=d({id:"df_know_kn2",label:"System Design",color:"#3b82f6",parentId:w.id,position:{x:560,y:-160},notes:"CAP theorem, distributed systems, load balancing. Design for failure. Use caching layers. Horizontal scaling preferred.",tags:["architecture","backend"]});return{tasks:{nodes:[l,a,o,n,r,s,i]},braindump:{nodes:[]},planner:{nodes:[c,u,x,b,p,g,f]},goals:{nodes:[m,h,y,v,k,j]},knowledge:{nodes:[N,w,D,C,S,M]},settings:{darkMode:!0,workspaceName:"My Workspace",autoSave:!0},recentNodeIds:[],version:"1.0.0"}},u=(0,n.U)()((0,r.tJ)((e,t)=>({data:c(),activeMode:"tasks",selectedNodeId:null,editingNodeId:null,searchQuery:"",contextMenu:{visible:!1,x:0,y:0,nodeId:null},sidebarOpen:!0,filterState:{showOverdue:!1,showUrgent:!1,projectId:null},setActiveMode:t=>e({activeMode:t,selectedNodeId:null,editingNodeId:null}),addNode:function(l){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i(),n=t().activeMode,r=t().data[n].nodes,d=l?r.find(e=>e.id===l):null,c=a.color||(null==d?void 0:d.color)||s[Math.floor(Math.random()*s.length)],u=r.filter(e=>e.parentId===l),x=(null==d?void 0:d.position)||{x:0,y:0},b=u.length,p={id:o,parentId:l,label:"New Node",color:c,position:a.position||{x:x.x+(l?240:0),y:x.y+(80*b-40*b)},collapsed:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),...a};return e(e=>({data:{...e.data,[n]:{nodes:[...e.data[n].nodes,p]}},selectedNodeId:o,editingNodeId:o})),t().addRecentNode(o),o},updateNode:(l,a)=>{let o=t().activeMode;e(e=>({data:{...e.data,[o]:{nodes:e.data[o].nodes.map(e=>e.id===l?{...e,...a,updatedAt:new Date().toISOString()}:e)}}}))},deleteNode:l=>{let a=t().activeMode,o=(e,t)=>{let l=t.filter(t=>t.parentId===e);return[e,...l.flatMap(e=>o(e.id,t))]};e(e=>{let t=o(l,e.data[a].nodes);return{data:{...e.data,[a]:{nodes:e.data[a].nodes.filter(e=>!t.includes(e.id))}},selectedNodeId:e.selectedNodeId===l?null:e.selectedNodeId}})},setSelectedNode:t=>e({selectedNodeId:t}),setEditingNode:t=>e({editingNodeId:t}),setSearchQuery:t=>e({searchQuery:t}),setContextMenu:t=>e({contextMenu:t}),toggleSidebar:()=>e(e=>({sidebarOpen:!e.sidebarOpen})),updateSettings:t=>e(e=>({data:{...e.data,settings:{...e.data.settings,...t}}})),toggleDarkMode:()=>e(e=>({data:{...e.data,settings:{...e.data.settings,darkMode:!e.data.settings.darkMode}}})),setFilter:t=>e(e=>({filterState:{...e.filterState,...t}})),exportData:()=>{let e=new Blob([JSON.stringify(t().data,null,2)],{type:"application/json"}),l=URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download="mindflow-".concat(new Date().toISOString().split("T")[0],".json"),a.click(),URL.revokeObjectURL(l)},importData:t=>e({data:t}),addRecentNode:t=>e(e=>({data:{...e.data,recentNodeIds:[t,...e.data.recentNodeIds.filter(e=>e!==t)].slice(0,10)}})),getNodes:()=>t().data[t().activeMode].nodes,getNodeById:e=>{for(let l of["tasks","braindump","planner","goals","knowledge"]){let a=t().data[l].nodes.find(t=>t.id===e);if(a)return a}},getChildren:e=>t().getNodes().filter(t=>t.parentId===e)}),{name:"mindflow-data",version:1})),x=[{id:"tasks",label:"Tasks",icon:"✓"},{id:"braindump",label:"Dump",icon:"\uD83E\uDDE0"},{id:"planner",label:"Planner",icon:"\uD83D\uDCC5"},{id:"goals",label:"Goals",icon:"\uD83C\uDFAF"},{id:"knowledge",label:"Knowledge",icon:"\uD83D\uDCDA"}];function b(){let{activeMode:e,setActiveMode:t,exportData:l,importData:n,data:r,toggleDarkMode:s,toggleSidebar:i}=u(),d=(0,o.useRef)(null),c=r.settings.darkMode,b="flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-150";return(0,a.jsxs)("header",{className:"flex items-center justify-between px-4 h-14 shrink-0 z-30",style:{background:c?"rgba(10,12,20,0.98)":"rgba(255,255,255,0.98)",borderBottom:"1px solid ".concat(c?"rgba(99,102,241,0.15)":"rgba(99,102,241,0.1)"),backdropFilter:"blur(16px)"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:i,className:"w-8 h-8 rounded-lg flex items-center justify-center transition-colors",style:{color:c?"#6b7280":"#9ca3af",background:"transparent"},onMouseEnter:e=>e.target.style.background=c?"rgba(75,85,99,0.2)":"rgba(243,244,246,0.8)",onMouseLeave:e=>e.target.style.background="transparent",children:"☰"}),(0,a.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-xl flex items-center justify-center text-white text-sm font-black shadow-lg",style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #ec4899 100%)"},children:"M"}),(0,a.jsx)("span",{className:"font-black text-xl tracking-tight",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"MindFlow"})]})]}),(0,a.jsx)("nav",{className:"flex items-center gap-1 p-1 rounded-xl",style:{background:c?"rgba(22,25,38,0.9)":"rgba(243,244,246,0.9)"},children:x.map((l,o)=>{let n=e===l.id;return(0,a.jsxs)("button",{onClick:()=>t(l.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-semibold transition-all duration-200",style:{background:n?"linear-gradient(135deg, #6366f1, #8b5cf6)":"transparent",color:n?"#fff":c?"#9ca3af":"#6b7280",boxShadow:n?"0 2px 12px rgba(99,102,241,0.4)":"none",transform:n?"translateY(-1px)":"none"},title:"".concat(l.label," (").concat(o+1,")"),children:[(0,a.jsx)("span",{children:l.icon}),(0,a.jsx)("span",{className:"hidden md:inline",children:l.label})]},l.id)})}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("button",{onClick:l,className:b,style:{color:c?"#9ca3af":"#6b7280"},title:"Export JSON",children:[(0,a.jsx)("span",{className:"text-base",children:"↑"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Export"})]}),(0,a.jsxs)("button",{onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.click()},className:b,style:{color:c?"#9ca3af":"#6b7280"},title:"Import JSON",children:[(0,a.jsx)("span",{className:"text-base",children:"↓"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Import"})]}),(0,a.jsx)("input",{ref:d,type:"file",accept:".json",className:"hidden",onChange:e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!l)return;let a=new FileReader;a.onload=e=>{try{var t;let l=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);n(l)}catch(e){alert("Invalid JSON file. Please use a MindFlow export.")}},a.readAsText(l),e.target.value=""}}),(0,a.jsx)("div",{className:"w-px h-6 mx-1",style:{background:c?"rgba(75,85,99,0.4)":"rgba(229,231,235,0.8)"}}),(0,a.jsx)("button",{onClick:s,className:"w-9 h-9 rounded-xl flex items-center justify-center transition-all hover:scale-105",style:{background:c?"rgba(251,191,36,0.1)":"rgba(99,102,241,0.1)",color:c?"#fbbf24":"#6366f1"},title:"Toggle dark/light mode",children:c?"☀️":"\uD83C\uDF19"})]})]})}function p(e){return!!e&&new Date(e)<new Date}function g(e){let t=new Date(e),l=new Date,a=Math.ceil((t.getTime()-l.getTime())/864e5);return a<0?"".concat(Math.abs(a),"d overdue"):0===a?"Due today":1===a?"Due tomorrow":"Due in ".concat(a,"d")}function f(e,t){return 0===t?0:Math.min(100,Math.round(e/t*100))}let m={tasks:{icon:"✓",label:"Tasks"},braindump:{icon:"\uD83E\uDDE0",label:"Brain Dump"},planner:{icon:"\uD83D\uDCC5",label:"Planner"},goals:{icon:"\uD83C\uDFAF",label:"Goals"},knowledge:{icon:"\uD83D\uDCDA",label:"Knowledge"}};function h(){let{activeMode:e,setActiveMode:t,sidebarOpen:l,searchQuery:n,setSearchQuery:r,addNode:s,data:i,setSelectedNode:d,filterState:c,setFilter:x}=u(),[b,g]=(0,o.useState)(""),f=i.settings.darkMode,h=(0,o.useCallback)(()=>{if(!b.trim())return;let e=s(null,{label:b.trim()});g(""),d(e)},[b,s,d]),y=i.tasks.nodes.filter(e=>!e.isRoot),v={total:y.filter(e=>e.status).length,done:y.filter(e=>"done"===e.status).length,overdue:y.filter(e=>p(e.deadline)&&"done"!==e.status).length,urgent:y.filter(e=>"urgent"===e.priority&&"done"!==e.status).length},k=i.recentNodeIds.slice(0,8).map(e=>{for(let t of["tasks","braindump","planner","goals","knowledge"]){let l=i[t].nodes.find(t=>t.id===e);if(l)return{node:l,mode:t}}return null}).filter(Boolean);if(!l)return null;let j=e=>(0,a.jsx)("div",{className:"text-[10px] font-bold uppercase tracking-widest mb-2",style:{color:f?"#4b5563":"#9ca3af"},children:e}),N=(0,a.jsx)("div",{className:"my-2 h-px",style:{background:f?"rgba(75,85,99,0.15)":"rgba(229,231,235,0.5)"}});return(0,a.jsxs)("aside",{className:"flex flex-col h-full shrink-0 border-r overflow-hidden",style:{width:248,background:f?"rgba(9,11,18,0.98)":"rgba(248,250,252,0.98)",borderColor:f?"rgba(99,102,241,0.12)":"rgba(99,102,241,0.08)"},children:[(0,a.jsx)("div",{className:"px-3 pt-3 pb-2",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"\uD83D\uDD0D"}),(0,a.jsx)("input",{type:"text",placeholder:"Search… (Ctrl+F)",value:n,onChange:e=>r(e.target.value),className:"w-full pl-8 pr-3 py-2 rounded-xl text-sm outline-none",style:{background:f?"rgba(22,25,38,0.9)":"rgba(255,255,255,0.9)",border:"1px solid ".concat(f?"rgba(75,85,99,0.3)":"rgba(209,213,219,0.5)"),color:f?"#e5e7eb":"#111827"}})]})}),N,(0,a.jsxs)("div",{className:"px-3 pb-2",children:[j("Quick Add"),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"New ".concat(e," node…"),value:b,onChange:e=>g(e.target.value),onKeyDown:e=>"Enter"===e.key&&h(),className:"flex-1 min-w-0 px-2.5 py-1.5 rounded-xl text-sm outline-none",style:{background:f?"rgba(22,25,38,0.9)":"rgba(255,255,255,0.9)",border:"1px solid ".concat(f?"rgba(75,85,99,0.3)":"rgba(209,213,219,0.5)"),color:f?"#e5e7eb":"#111827"}}),(0,a.jsx)("button",{onClick:h,className:"w-8 h-8 rounded-xl flex items-center justify-center text-white text-lg font-bold flex-shrink-0 transition-transform hover:scale-105 active:scale-95",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 2px 8px rgba(99,102,241,0.4)"},children:"+"})]})]}),N,(0,a.jsxs)("div",{className:"px-3 pb-2",children:[j("Modes"),(0,a.jsx)("div",{className:"flex flex-col gap-0.5",children:Object.entries(m).map((l,o)=>{let[n,r]=l,s=e===n;return(0,a.jsxs)("button",{onClick:()=>t(n),className:"flex items-center gap-2.5 px-2.5 py-2 rounded-xl text-sm text-left transition-all",style:{background:s?"linear-gradient(135deg, rgba(99,102,241,0.2), rgba(139,92,246,0.15))":"transparent",border:s?"1px solid rgba(99,102,241,0.25)":"1px solid transparent",color:s?"#818cf8":f?"#6b7280":"#9ca3af",fontWeight:s?600:400},children:[(0,a.jsx)("span",{children:r.icon}),(0,a.jsx)("span",{className:"flex-1",children:r.label}),(0,a.jsx)("span",{className:"text-[10px] opacity-40 font-mono",children:o+1})]},n)})})]}),N,"tasks"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"px-3 pb-2",children:[j("Filters"),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[{label:"Total",value:v.total,color:"#6366f1"},{label:"Done",value:v.done,color:"#10b981"},{label:"Overdue",value:v.overdue,color:"#ef4444"},{label:"Urgent",value:v.urgent,color:"#f97316"}].map(e=>(0,a.jsxs)("div",{className:"rounded-xl p-2 text-center",style:{background:"".concat(e.color,"15")},children:[(0,a.jsx)("div",{className:"text-lg font-black",style:{color:e.color},children:e.value}),(0,a.jsx)("div",{className:"text-[10px] font-medium",style:{color:f?"#6b7280":"#9ca3af"},children:e.label})]},e.label))}),[{key:"showOverdue",label:"Only Overdue",color:"#ef4444"},{key:"showUrgent",label:"Only Urgent",color:"#f97316"}].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full",style:{background:e.color}}),(0,a.jsx)("span",{className:"text-xs",style:{color:f?"#9ca3af":"#6b7280"},children:e.label})]}),(0,a.jsx)("button",{onClick:()=>x({[e.key]:!c[e.key]}),className:"relative w-10 h-5 rounded-full transition-colors",style:{background:c[e.key]?e.color:f?"#374151":"#d1d5db"},children:(0,a.jsx)("span",{className:"absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-all",style:{left:c[e.key]?"1.25rem":"0.125rem"}})})]},e.key))]}),N]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-3 pb-2 min-h-0",children:[j("Recent"),0===k.length?(0,a.jsx)("p",{className:"text-xs italic",style:{color:f?"#4b5563":"#9ca3af"},children:"No recent nodes yet"}):(0,a.jsx)("div",{className:"flex flex-col gap-0.5",children:k.map(e=>{let{node:l,mode:o}=e;return(0,a.jsxs)("button",{onClick:()=>{t(o),d(l.id)},className:"flex items-center gap-2.5 px-2 py-1.5 rounded-lg text-left transition-colors w-full",style:{color:f?"#9ca3af":"#6b7280"},onMouseEnter:e=>e.currentTarget.style.background=f?"rgba(75,85,99,0.15)":"rgba(243,244,246,0.8)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,a.jsx)("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{background:l.color}}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-xs truncate",style:{color:f?"#d1d5db":"#374151"},children:l.label}),(0,a.jsx)("div",{className:"text-[10px] capitalize",style:{color:f?"#4b5563":"#9ca3af"},children:o})]})]},l.id)})})]}),(0,a.jsxs)("div",{className:"px-3 py-2 text-center border-t",style:{borderColor:f?"rgba(75,85,99,0.15)":"rgba(229,231,235,0.5)"},children:[(0,a.jsx)("div",{className:"text-[10px] font-mono",style:{color:f?"#374151":"#d1d5db"},children:"Tab=child \xb7 Enter=sibling \xb7 Del=remove"}),(0,a.jsx)("div",{className:"text-[10px] font-mono mt-0.5",style:{color:f?"#374151":"#d1d5db"},children:"1-5=mode \xb7 Ctrl+F=search \xb7 dbl-click=edit"})]})]})}function y(e){let{node:t,isSelected:l,isHighlighted:n,transform:r}=e,{setSelectedNode:s,editingNodeId:i,setEditingNode:d,updateNode:c,addNode:x,setContextMenu:b,activeMode:m,getChildren:h,data:y}=u(),[v,k]=(0,o.useState)(t.label),j=(0,o.useRef)(null),N=i===t.id,w=y.settings.darkMode,D=h(t.id).length>0,C=p(t.deadline)&&"done"!==t.status,S=t.targetValue?f(t.currentValue||0,t.targetValue):null;(0,o.useEffect)(()=>{k(t.label)},[t.label]),(0,o.useEffect)(()=>{N&&j.current&&(j.current.focus(),j.current.select())},[N]);let M=(0,o.useCallback)(e=>{if(N)return;e.stopPropagation(),s(t.id);let l=e.clientX,a=e.clientY,o=t.position.x,n=t.position.y,i=e=>{let s=(e.clientX-l)/r.scale,i=(e.clientY-a)/r.scale;(Math.abs(s)>3||Math.abs(i)>3)&&c(t.id,{position:{x:o+s,y:n+i}})},d=()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",d)},[N,t.id,t.position,r.scale,s,c]),I=(0,o.useCallback)(e=>{e.stopPropagation(),d(t.id),k(t.label)},[t.id,t.label,d]),E=(0,o.useCallback)(()=>{v.trim()&&c(t.id,{label:v.trim()}),d(null)},[v,t.id,c,d]),_=(0,o.useCallback)(e=>{"Enter"===e.key&&E(),"Escape"===e.key&&(k(t.label),d(null))},[E,t.label,d]),T=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),b({visible:!0,x:e.clientX,y:e.clientY,nodeId:t.id})},[t.id,b]),R=l?t.color:n?"#f59e0b":C?"#ef4444":"done"===t.status?"#10b981":"".concat(t.color,"55"),F="goals"===m&&null!==S?1+S/100*.3:1;return(0,a.jsxs)("div",{className:"absolute flex flex-col items-center justify-center rounded-2xl cursor-pointer group transition-all duration-200",style:{left:t.position.x,top:t.position.y,transform:"translate(-50%, -50%) scale(".concat(F,")"),transformOrigin:"center",background:t.isRoot?"linear-gradient(135deg, ".concat(t.color,"33, ").concat(t.color,"18)"):w?"rgba(22, 25, 38, 0.96)":"rgba(255,255,255,0.96)",border:"2px solid ".concat(R),boxShadow:l?"0 0 0 3px ".concat(t.color,"44, 0 12px 40px ").concat(t.color,"22, 0 4px 16px rgba(0,0,0,0.4)"):"0 4px 20px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.04)",backdropFilter:"blur(12px)",padding:"10px 16px",minWidth:t.isRoot?160:130,zIndex:l?20:10,willChange:"transform"},onMouseDown:M,onDoubleClick:I,onContextMenu:T,children:[t.status&&(0,a.jsx)("div",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 rounded-full border-2 flex items-center justify-center",style:{background:"done"===t.status?"#10b981":"doing"===t.status?"#f59e0b":"#6b7280",borderColor:w?"#0d0f17":"#fff"},children:"done"===t.status&&(0,a.jsx)("span",{className:"text-[7px] text-white font-bold",children:"✓"})}),"urgent"===t.priority&&"done"!==t.status&&(0,a.jsx)("div",{className:"absolute -top-1.5 -left-1.5 w-4 h-4 rounded-full border-2 flex items-center justify-center",style:{background:"#ef4444",borderColor:w?"#0d0f17":"#fff"},children:(0,a.jsx)("span",{className:"text-[7px] text-white font-bold",children:"!"})}),!0===t.completed&&(0,a.jsx)("div",{className:"absolute -top-1.5 -right-1.5 w-5 h-5 rounded-full border-2 flex items-center justify-center",style:{background:"#10b981",borderColor:w?"#0d0f17":"#fff"},children:(0,a.jsx)("span",{className:"text-[9px] text-white",children:"✓"})}),N?(0,a.jsx)("input",{ref:j,value:v,onChange:e=>k(e.target.value),onBlur:E,onKeyDown:_,className:"bg-transparent border-none outline-none text-center font-medium w-full text-sm",style:{color:t.isRoot?t.color:w?"#f3f4f6":"#111827",minWidth:80},onClick:e=>e.stopPropagation()}):(0,a.jsx)("div",{className:"text-center font-medium leading-tight",style:{color:t.isRoot?t.color:w?"#f3f4f6":"#111827",fontSize:t.isRoot?"0.95rem":"0.82rem",fontWeight:t.isRoot?700:500,textDecoration:"done"===t.status?"line-through":"none",opacity:"done"===t.status?.6:1},children:t.label}),"goals"===m&&t.targetValue&&null!==S&&(0,a.jsxs)("div",{className:"w-full mt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-1",style:{color:t.color,fontSize:9},children:[(0,a.jsx)("span",{children:(t.currentValue||0).toLocaleString()}),(0,a.jsx)("span",{children:t.targetValue.toLocaleString()})]}),(0,a.jsx)("div",{className:"w-full h-1.5 rounded-full overflow-hidden",style:{background:w?"rgba(75,85,99,0.4)":"rgba(229,231,235,0.6)"},children:(0,a.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(S,"%"),background:"linear-gradient(90deg, ".concat(t.color,", ").concat(t.color,"cc)"),boxShadow:"0 0 6px ".concat(t.color,"99"),transition:"width 0.6s ease"}})}),(0,a.jsxs)("div",{className:"text-center mt-0.5",style:{fontSize:9,color:t.color},children:[S,"%"]})]}),t.deadline&&"done"!==t.status&&(0,a.jsx)("div",{className:"text-center mt-1 font-medium",style:{fontSize:10,color:C?"#f87171":"#9ca3af"},children:g(t.deadline)}),"planner"===m&&t.estimatedTime&&(0,a.jsxs)("div",{className:"text-center mt-0.5",style:{fontSize:10,color:"#9ca3af"},children:[t.estimatedTime,"min"]}),"knowledge"===m&&t.tags&&t.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 justify-center mt-1.5",children:t.tags.slice(0,3).map(e=>(0,a.jsxs)("span",{className:"px-1.5 py-0.5 rounded-full",style:{fontSize:9,background:"".concat(t.color,"22"),color:t.color},children:["#",e]},e))}),"knowledge"===m&&t.notes&&(0,a.jsx)("div",{className:"mt-1",style:{fontSize:9,color:"#6b7280"},children:"\uD83D\uDCDD Has notes"}),D&&(0,a.jsx)("button",{className:"absolute -bottom-3.5 left-1/2 -translate-x-1/2 w-6 h-6 rounded-full flex items-center justify-center text-white transition-all hover:scale-110 z-30 text-xs font-bold border-2",style:{background:t.color,borderColor:w?"#0d0f17":"#fff",boxShadow:"0 2px 8px ".concat(t.color,"66")},onClick:e=>{e.stopPropagation(),c(t.id,{collapsed:!t.collapsed})},children:t.collapsed?"+":"−"}),l&&(0,a.jsx)("button",{className:"absolute -right-5 top-1/2 -translate-y-1/2 w-8 h-8 rounded-full border-2 border-dashed flex items-center justify-center transition-all hover:scale-110 z-30 text-sm opacity-80 hover:opacity-100",style:{borderColor:t.color,color:t.color,background:w?"#0d0f17":"#fff"},onClick:e=>{e.stopPropagation(),x(t.id)},title:"Add child (Tab)",children:"+"})]})}function v(e){let{x:t,y:l,nodeId:n,onClose:r}=e,{addNode:i,deleteNode:d,updateNode:c,getNodeById:x,setEditingNode:b,activeMode:p,data:g}=u(),f=(0,o.useRef)(null),[m,h]=(0,o.useState)(null),[y,v]=(0,o.useState)(""),k=g.settings.darkMode,j=n?x(n):null;(0,o.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&r()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[r]);let N=Math.min(t,window.innerWidth-220),w=Math.min(l,window.innerHeight-380),D=k?"rgba(75,85,99,0.4)":"rgba(229,231,235,0.8)",C=k?"#d1d5db":"#374151",S=k?"rgba(55,65,81,0.5)":"rgba(243,244,246,0.8)",M=n?[{icon:"✏️",label:"Rename",action:()=>{b(n),r()}},{icon:"➕",label:"Add Child",action:()=>{i(n),r()}},{icon:"\uD83C\uDFA8",label:"Change Color…",action:()=>h("color")},..."tasks"===p?[{icon:"\uD83D\uDCC5",label:"Set Deadline…",action:()=>h("deadline")},{type:"sep"},{icon:"✅",label:"Mark Done",action:()=>{c(n,{status:"done"}),r()}},{icon:"\uD83D\uDD04",label:"Mark In Progress",action:()=>{c(n,{status:"doing"}),r()}},{icon:"⭕",label:"Mark Todo",action:()=>{c(n,{status:"todo"}),r()}},{icon:"\uD83D\uDD34",label:"Set Urgent",action:()=>{c(n,{priority:"urgent"}),r()}}]:[],..."planner"===p?[{icon:"✅",label:"Mark Complete",action:()=>{c(n,{completed:!0}),r()}},{icon:"⭕",label:"Mark Incomplete",action:()=>{c(n,{completed:!1}),r()}}]:[],{type:"sep"},{icon:"\uD83D\uDDD1️",label:"Delete",danger:!0,action:()=>{d(n),r()}}]:[{icon:"➕",label:"Add Root Node",action:()=>{i(null),r()}}];return(0,a.jsxs)("div",{ref:f,className:"fixed z-50 rounded-xl shadow-2xl overflow-hidden animate-fade-in",style:{left:N,top:w,background:k?"rgba(15,17,26,0.98)":"rgba(255,255,255,0.98)",border:"1px solid ".concat(D),minWidth:190,backdropFilter:"blur(16px)"},children:[j&&(0,a.jsxs)("div",{className:"px-3 py-2.5 border-b flex items-center gap-2",style:{borderColor:D,background:"".concat(j.color,"11")},children:[(0,a.jsx)("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{background:j.color}}),(0,a.jsx)("span",{className:"text-xs font-semibold truncate",style:{color:j.color},children:j.label})]}),"color"===m&&(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-2",children:"Choose color"}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-2",children:s.map(e=>(0,a.jsx)("button",{className:"w-8 h-8 rounded-full transition-transform hover:scale-110 active:scale-95",style:{background:e,outline:(null==j?void 0:j.color)===e?"2px solid ".concat(e):"none",outlineOffset:2},onClick:()=>{n&&(c(n,{color:e}),r())}},e))})]}),"deadline"===m&&(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-2",children:"Set deadline"}),(0,a.jsx)("input",{type:"date",value:y,onChange:e=>v(e.target.value),autoFocus:!0,className:"w-full rounded-lg px-2 py-1.5 text-sm outline-none",style:{background:k?"rgba(30,32,44,0.9)":"rgba(249,250,251,0.9)",border:"1px solid ".concat(k?"rgba(75,85,99,0.5)":"rgba(209,213,219,0.6)"),color:k?"#f3f4f6":"#111827"},onKeyDown:e=>{"Enter"===e.key&&y&&n&&(c(n,{deadline:new Date(y+"T23:59:59").toISOString()}),r())}}),(0,a.jsx)("button",{className:"w-full mt-2 py-1.5 rounded-lg text-sm font-semibold text-white",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"},onClick:()=>{y&&n&&(c(n,{deadline:new Date(y+"T23:59:59").toISOString()}),r())},children:"Set Deadline"})]}),!m&&(0,a.jsx)("div",{className:"py-1",children:M.map((e,t)=>"type"in e&&"sep"===e.type?(0,a.jsx)("div",{className:"my-1 h-px mx-2",style:{background:D}},t):(0,a.jsxs)("button",{onClick:"action"in e?e.action:void 0,className:"w-full flex items-center gap-2.5 px-3 py-2 text-sm text-left transition-colors",style:{color:"danger"in e&&e.danger?"#f87171":C},onMouseEnter:t=>{t.currentTarget.style.background="danger"in e&&e.danger?"rgba(239,68,68,0.1)":S},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{children:e.label})]},t))})]})}function k(){let{getNodes:e,activeMode:t,selectedNodeId:l,setSelectedNode:n,contextMenu:r,setContextMenu:s,searchQuery:i,data:d,filterState:c,addNode:x}=u(),b=(0,o.useRef)(null),[g,f]=(0,o.useState)(()=>({x:window.innerWidth/2,y:window.innerHeight/2,scale:1})),m=(0,o.useRef)(!1),h=(0,o.useRef)({x:0,y:0}),k=(0,o.useRef)(0),j=e();(0,o.useEffect)(()=>{f({x:window.innerWidth/2,y:window.innerHeight/2,scale:1})},[t]);let N=(0,o.useCallback)(e=>{let t=e.target;(t===b.current||t.dataset.canvas)&&(m.current=!0,h.current={x:e.clientX,y:e.clientY},n(null),s({visible:!1,x:0,y:0,nodeId:null}))},[n,s]),w=(0,o.useCallback)(e=>{if(!m.current)return;let t=e.clientX-h.current.x,l=e.clientY-h.current.y;h.current={x:e.clientX,y:e.clientY},f(e=>({...e,x:e.x+t,y:e.y+l}))},[]),D=(0,o.useCallback)(()=>{m.current=!1},[]),C=(0,o.useCallback)(e=>{e.preventDefault();let t=e.deltaY>0?.9:1.1,l=b.current.getBoundingClientRect(),a=e.clientX-l.left,o=e.clientY-l.top;f(e=>{let l=Math.max(.15,Math.min(3,e.scale*t)),n=l/e.scale;return{x:a-(a-e.x)*n,y:o-(o-e.y)*n,scale:l}})},[]),S=(0,o.useCallback)(e=>{let t=e.target;(t===b.current||t.dataset.canvas)&&(e.preventDefault(),s({visible:!0,x:e.clientX,y:e.clientY,nodeId:null}))},[s]),M=(0,o.useCallback)(e=>{if(2===e.touches.length){let t=e.touches[0].clientX-e.touches[1].clientX,l=e.touches[0].clientY-e.touches[1].clientY;k.current=Math.hypot(t,l)}else m.current=!0,h.current={x:e.touches[0].clientX,y:e.touches[0].clientY}},[]),I=(0,o.useCallback)(e=>{if(2===e.touches.length){let t=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY),l=t/k.current;k.current=t;let a=(e.touches[0].clientX+e.touches[1].clientX)/2,o=(e.touches[0].clientY+e.touches[1].clientY)/2;f(e=>{let t=Math.max(.15,Math.min(3,e.scale*l)),n=t/e.scale;return{x:a-(a-e.x)*n,y:o-(o-e.y)*n,scale:t}})}else if(m.current){let t=e.touches[0].clientX-h.current.x,l=e.touches[0].clientY-h.current.y;h.current={x:e.touches[0].clientX,y:e.touches[0].clientY},f(e=>({...e,x:e.x+t,y:e.y+l}))}},[]),E=(0,o.useCallback)(()=>{m.current=!1},[]),_=o.useMemo(()=>{if("tasks"!==t)return j;let{showOverdue:e,showUrgent:l,projectId:a}=c;return e||l||a?j.filter(t=>!!t.isRoot||!t.parentId||(!e||!!p(t.deadline))&&(!l||"urgent"===t.priority)):j},[j,t,c]),T=d.settings.darkMode;return(0,a.jsxs)("div",{ref:b,className:"relative w-full h-full overflow-hidden",style:{cursor:m.current?"grabbing":"grab",userSelect:"none"},onMouseDown:N,onMouseMove:w,onMouseUp:D,onMouseLeave:D,onWheel:C,onContextMenu:S,onTouchStart:M,onTouchMove:I,onTouchEnd:E,"data-canvas":"true",children:[(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none","data-canvas":"true",style:{backgroundImage:"radial-gradient(circle, ".concat(T?"#2d3148":"#c7d2fe"," 1.5px, transparent 1.5px)"),backgroundSize:"".concat(32*g.scale,"px ").concat(32*g.scale,"px"),backgroundPosition:"".concat(g.x%(32*g.scale),"px ").concat(g.y%(32*g.scale),"px"),opacity:.4}}),(0,a.jsxs)("div",{style:{transform:"translate(".concat(g.x,"px, ").concat(g.y,"px) scale(").concat(g.scale,")"),transformOrigin:"0 0",position:"absolute",inset:0,width:1,height:1},children:[(0,a.jsx)("svg",{style:{position:"absolute",left:-8e3,top:-8e3,width:16e3,height:16e3,overflow:"visible",pointerEvents:"none"},children:(()=>{let e=[],t=new Map(j.map(e=>[e.id,e]));for(let o of _){if(!o.parentId)continue;let n=t.get(o.parentId);if(!n||n.collapsed)continue;let r=n.position.x,s=n.position.y,d=o.position.x,c=o.position.y,u=(r+d)/2,x="M ".concat(r," ").concat(s," C ").concat(u," ").concat(s,", ").concat(u," ").concat(c,", ").concat(d," ").concat(c),b=!!i&&o.label.toLowerCase().includes(i.toLowerCase()),g=p(o.deadline)&&"done"!==o.status,f=b?"#f59e0b":g?"#ef4444":o.color,m=l===o.id;e.push((0,a.jsx)("path",{d:x,stroke:f,strokeWidth:m?3:2,strokeOpacity:m?.9:.5,fill:"none",strokeLinecap:"round",style:{filter:m?"drop-shadow(0 0 4px ".concat(f,")"):"none",transition:"all 0.2s ease"}},"e-".concat(o.id)))}return e})()}),_.filter(e=>{if(!e.parentId)return!0;let t=e=>{let l=j.find(t=>t.id===e);return!!l&&(!!l.collapsed||!!l.parentId&&t(l.parentId))};return!t(e.parentId)}).map(e=>(0,a.jsx)(y,{node:e,isSelected:l===e.id,isHighlighted:!!i&&e.label.toLowerCase().includes(i.toLowerCase()),transform:g},e.id))]}),(0,a.jsx)("div",{className:"absolute bottom-6 right-6 flex flex-col gap-2 z-20",children:[{label:"+",action:()=>f(e=>({...e,scale:Math.min(3,1.25*e.scale)}))},{label:"−",action:()=>f(e=>({...e,scale:Math.max(.15,.8*e.scale)}))},{label:"⌂",action:()=>f({x:window.innerWidth/2,y:window.innerHeight/2,scale:1})}].map(e=>{let{label:t,action:l}=e;return(0,a.jsx)("button",{onClick:l,className:"w-10 h-10 rounded-xl flex items-center justify-center font-bold text-base transition-all hover:scale-105 active:scale-95 shadow-lg",style:{background:T?"rgba(22,25,38,0.9)":"rgba(255,255,255,0.9)",border:"1px solid ".concat(T?"rgba(99,102,241,0.3)":"rgba(99,102,241,0.2)"),color:T?"#818cf8":"#6366f1",backdropFilter:"blur(8px)"},children:t},t)})}),(0,a.jsxs)("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 px-3 py-1 rounded-full text-xs z-10",style:{background:T?"rgba(22,25,38,0.8)":"rgba(255,255,255,0.8)",border:"1px solid ".concat(T?"rgba(75,85,99,0.3)":"rgba(229,231,235,0.5)"),color:T?"#6b7280":"#9ca3af",backdropFilter:"blur(8px)"},children:[Math.round(100*g.scale),"%"]}),r.visible&&(0,a.jsx)(v,{x:r.x,y:r.y,nodeId:r.nodeId,onClose:()=>s({visible:!1,x:0,y:0,nodeId:null})})]})}let j=[{v:"todo",label:"Todo",color:"#6b7280"},{v:"doing",label:"Doing",color:"#f59e0b"},{v:"done",label:"Done",color:"#10b981"}],N=[{v:"urgent",label:"\uD83D\uDD34 Urgent",color:"#ef4444"},{v:"high",label:"\uD83D\uDFE0 High",color:"#f97316"},{v:"normal",label:"\uD83D\uDD35 Normal",color:"#6366f1"},{v:"low",label:"⚪ Low",color:"#6b7280"}];function w(){let{selectedNodeId:e,data:t,updateNode:l,deleteNode:n,addNode:r,getNodeById:i,setSelectedNode:d,activeMode:c}=u(),x=t.settings.darkMode,b=e?i(e):null,[f,m]=(0,o.useState)(""),[h,y]=(0,o.useState)("");if((0,o.useEffect)(()=>{b&&(m(b.label),y(b.deadline?b.deadline.split("T")[0]:""))},[null==b?void 0:b.id]),!b)return null;let v=p(b.deadline)&&"done"!==b.status;return(0,a.jsx)("div",{className:"absolute right-4 top-4 z-20 w-72",style:{pointerEvents:"all"},children:(0,a.jsxs)("div",{className:"rounded-2xl overflow-hidden shadow-2xl",style:{background:x?"rgba(13,15,24,0.97)":"rgba(255,255,255,0.97)",border:"2px solid ".concat(b.color,"44"),backdropFilter:"blur(16px)"},children:[(0,a.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",style:{background:"".concat(b.color,"15"),borderBottom:"1px solid ".concat(b.color,"22")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{background:b.color,boxShadow:"0 0 8px ".concat(b.color)}}),(0,a.jsx)("span",{className:"text-xs font-bold uppercase tracking-widest",style:{color:b.color},children:b.isRoot?"Workspace":"tasks"===c?"Task":"Node"})]}),(0,a.jsx)("button",{onClick:()=>d(null),className:"w-6 h-6 rounded-full flex items-center justify-center text-gray-400 hover:text-gray-200 hover:bg-white/10 transition-colors",children:"✕"})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider block mb-1.5",children:"Label"}),(0,a.jsx)("input",{value:f,onChange:e=>m(e.target.value),onBlur:()=>f.trim()&&l(b.id,{label:f.trim()}),onKeyDown:e=>"Enter"===e.key&&f.trim()&&l(b.id,{label:f.trim()}),className:"w-full px-3 py-2 rounded-xl text-sm font-medium outline-none",style:{background:x?"rgba(30,32,44,0.8)":"rgba(249,250,251,0.8)",border:"1px solid ".concat(b.color,"44"),color:x?"#f3f4f6":"#111827"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider block mb-2",children:"Color"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>(0,a.jsx)("button",{onClick:()=>l(b.id,{color:e}),className:"w-7 h-7 rounded-full transition-transform hover:scale-110 active:scale-95",style:{background:e,outline:b.color===e?"3px solid ".concat(e):"none",outlineOffset:2,boxShadow:b.color===e?"0 0 10px ".concat(e,"88"):"none"}},e))})]}),"tasks"===c&&!b.isRoot&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider block mb-1.5",children:"Status"}),(0,a.jsx)("div",{className:"flex gap-1.5",children:j.map(e=>(0,a.jsx)("button",{onClick:()=>l(b.id,{status:e.v}),className:"flex-1 py-1.5 rounded-lg text-xs font-semibold transition-all",style:{background:b.status===e.v?e.color:"".concat(e.color,"22"),color:b.status===e.v?"#fff":e.color,border:"1px solid ".concat(e.color,"44")},children:e.label},e.v))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider block mb-1.5",children:"Priority"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-1.5",children:N.map(e=>(0,a.jsx)("button",{onClick:()=>l(b.id,{priority:e.v}),className:"py-1.5 rounded-lg text-xs font-semibold transition-all",style:{background:b.priority===e.v?e.color:"".concat(e.color,"22"),color:b.priority===e.v?"#fff":e.color,border:"1px solid ".concat(e.color,"44")},children:e.label},e.v))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-xs font-semibold uppercase tracking-wider block mb-1.5",style:{color:v?"#f87171":"#6b7280"},children:["Deadline ",v&&"⚠ Overdue!"]}),(0,a.jsx)("input",{type:"date",value:h,onChange:e=>{y(e.target.value),e.target.value&&l(b.id,{deadline:new Date(e.target.value+"T23:59:59").toISOString()})},className:"w-full px-3 py-2 rounded-xl text-sm outline-none",style:{background:x?"rgba(30,32,44,0.8)":"rgba(249,250,251,0.8)",border:"1px solid ".concat(v?"#ef4444":b.color,"44"),color:x?"#f3f4f6":"#111827"}}),b.deadline&&(0,a.jsx)("p",{className:"text-xs mt-1",style:{color:v?"#f87171":"#6b7280"},children:g(b.deadline)})]})]}),"goals"===c&&!b.isRoot&&(0,a.jsx)("div",{className:"flex gap-2",children:[{label:"Current",key:"currentValue"},{label:"Target",key:"targetValue"}].map(e=>(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider block mb-1",children:e.label}),(0,a.jsx)("input",{type:"number",defaultValue:b[e.key]||0,onBlur:t=>l(b.id,{[e.key]:Number(t.target.value)}),className:"w-full px-2.5 py-2 rounded-xl text-sm outline-none",style:{background:x?"rgba(30,32,44,0.8)":"rgba(249,250,251,0.8)",border:"1px solid ".concat(b.color,"44"),color:x?"#f3f4f6":"#111827"}})]},e.key))}),"planner"===c&&!b.isRoot&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider block mb-1.5",children:"Estimated Time (min)"}),(0,a.jsx)("input",{type:"number",defaultValue:b.estimatedTime||0,onBlur:e=>l(b.id,{estimatedTime:Number(e.target.value)}),className:"w-full px-3 py-2 rounded-xl text-sm outline-none",style:{background:x?"rgba(30,32,44,0.8)":"rgba(249,250,251,0.8)",border:"1px solid ".concat(b.color,"44"),color:x?"#f3f4f6":"#111827"}})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>l(b.id,{completed:!0}),className:"flex-1 py-1.5 rounded-lg text-xs font-semibold text-white",style:{background:b.completed?"#10b981":"".concat(b.color,"33"),color:b.completed?"#fff":b.color},children:"✓ Complete"}),(0,a.jsx)("button",{onClick:()=>l(b.id,{completed:!1}),className:"flex-1 py-1.5 rounded-lg text-xs font-semibold",style:{background:b.completed?"transparent":"#6b728033",color:"#6b7280",border:"1px solid #6b728044"},children:"Reset"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2 border-t",style:{borderColor:x?"rgba(75,85,99,0.2)":"rgba(229,231,235,0.5)"},children:[(0,a.jsx)("button",{onClick:()=>r(b.id),className:"flex-1 py-2 rounded-xl text-xs font-bold text-white transition-all hover:opacity-80",style:{background:"linear-gradient(135deg, ".concat(b.color,", ").concat(b.color,"bb)")},children:"+ Add Child"}),!b.isRoot&&(0,a.jsx)("button",{onClick:()=>{n(b.id),d(null)},className:"px-3 py-2 rounded-xl text-xs font-semibold transition-all hover:bg-red-500/10",style:{color:"#f87171",border:"1px solid rgba(239,68,68,0.3)"},children:"\uD83D\uDDD1️"})]})]})]})})}function D(){let{selectedNodeId:e,addNode:t,deleteNode:l,setActiveMode:a,getNodeById:n,setEditingNode:r}=u();return(0,o.useEffect)(()=>{let o=o=>{let s=o.target.tagName,i="INPUT"===s||"TEXTAREA"===s||o.target.isContentEditable;if((o.ctrlKey||o.metaKey)&&"f"===o.key){o.preventDefault();let e=document.querySelector('input[placeholder*="Search"]');null==e||e.focus();return}if(i)return;let d={1:"tasks",2:"braindump",3:"planner",4:"goals",5:"knowledge"};if(d[o.key]&&!o.ctrlKey&&!o.metaKey){a(d[o.key]);return}if(!e)return;let c=n(e);c&&("Tab"===o.key?(o.preventDefault(),t(e)):"Enter"===o.key?(o.preventDefault(),t(c.parentId)):"Delete"===o.key||"Backspace"===o.key&&o.metaKey?c.isRoot||l(e):("F2"===o.key||"e"===o.key)&&(o.preventDefault(),r(e)))};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[e,t,l,a,n,r]),null}function C(){let{data:e,addNode:t,updateNode:l,getNodes:n}=u(),[r,s]=(0,o.useState)(""),[i,d]=(0,o.useState)(!1),c=e.settings.darkMode,x=n(),b=x.filter(e=>!e.parentId).length,p=(0,o.useCallback)(()=>{let e=r.split("\n").map(e=>e.trim()).filter(Boolean);e.length&&(d(!0),e.forEach((e,l)=>{setTimeout(()=>{t(null,{label:e,isDumped:!0,color:"#6b7280",position:{x:(Math.random()-.5)*700,y:(Math.random()-.5)*500}})},80*l)}),setTimeout(()=>{d(!1),s("")},80*e.length+300))},[r,t]),g=(0,o.useCallback)(()=>{let e=function(e){let t={work:["meeting","project","deadline","report","email","client","boss","team","sprint","review"],personal:["gym","fitness","health","family","friend","dinner","vacation","buy","shopping"],learning:["read","study","course","book","learn","research","tutorial","practice"],ideas:["idea","concept","maybe","could","should","what if","explore","try"]},l={work:"#3b82f6",personal:"#ec4899",learning:"#f59e0b",ideas:"#8b5cf6",other:"#6b7280"};return e.map(e=>{let a=e.label.toLowerCase(),o="other";for(let[e,l]of Object.entries(t))if(l.some(e=>a.includes(e))){o=e;break}return{...e,color:l[o]}})}(x.filter(e=>!e.parentId&&e.isDumped)),t={};e.forEach(e=>{(t[e.color]=t[e.color]||[]).push(e)}),Object.entries(t).forEach((e,a)=>{let[,o]=e,n=a/Object.keys(t).length*Math.PI*2,r=320*Math.cos(n),s=320*Math.sin(n);o.forEach((e,t)=>{let a=(t/(o.length||1)-.5)*160;l(e.id,{color:e.color,position:{x:r+a,y:s+80*Math.sin(t)}})})})},[x,l]);return(0,a.jsx)("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-20 w-full max-w-xl px-4",style:{pointerEvents:"none"},children:(0,a.jsxs)("div",{className:"rounded-2xl overflow-hidden shadow-2xl",style:{background:c?"rgba(10,12,20,0.96)":"rgba(255,255,255,0.96)",border:"1px solid ".concat(c?"rgba(99,102,241,0.25)":"rgba(99,102,241,0.15)"),backdropFilter:"blur(16px)",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",pointerEvents:"all"},children:[(0,a.jsxs)("div",{className:"px-4 py-3 flex items-center gap-3",style:{background:"linear-gradient(135deg, rgba(99,102,241,0.12), rgba(139,92,246,0.08))",borderBottom:"1px solid ".concat(c?"rgba(99,102,241,0.15)":"rgba(99,102,241,0.1)")},children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-xl flex items-center justify-center text-lg",style:{background:"rgba(99,102,241,0.15)"},children:"\uD83E\uDDE0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold text-sm",style:{color:"#818cf8"},children:"Brain Dump"}),(0,a.jsx)("div",{className:"text-xs",style:{color:c?"#4b5563":"#9ca3af"},children:"Empty your mind. Organize later."})]}),b>0&&(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-1.5 px-2.5 py-1 rounded-full",style:{background:"rgba(99,102,241,0.15)"},children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-violet-400 animate-pulse"}),(0,a.jsxs)("span",{className:"text-xs font-semibold",style:{color:"#818cf8"},children:[b," on canvas"]})]})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("textarea",{placeholder:"Write whatever's on your mind...\n• One thought per line\n• Press Shift+Enter to dump\n• Don't filter, just write!",value:r,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&e.shiftKey&&(e.preventDefault(),p())},rows:4,className:"w-full resize-none rounded-xl p-3 text-sm outline-none",style:{background:c?"rgba(22,25,38,0.9)":"rgba(249,250,251,0.9)",border:"1px solid ".concat(c?"rgba(99,102,241,0.2)":"rgba(99,102,241,0.15)"),color:c?"#e5e7eb":"#111827",lineHeight:1.7}}),(0,a.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,a.jsx)("button",{onClick:p,disabled:!r.trim()||i,className:"flex-1 py-2.5 rounded-xl text-sm font-bold text-white transition-all hover:opacity-90 active:scale-95 disabled:opacity-40",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 4px 16px rgba(99,102,241,0.4)"},children:i?"✨ Dumping...":"→ Dump It (Shift+Enter)"}),(0,a.jsx)("button",{onClick:g,disabled:0===b,className:"px-4 py-2.5 rounded-xl text-sm font-bold transition-all hover:opacity-80 active:scale-95 disabled:opacity-30",style:{background:c?"rgba(22,25,38,0.9)":"rgba(243,244,246,0.9)",border:"1px solid ".concat(c?"rgba(99,102,241,0.3)":"rgba(99,102,241,0.2)"),color:"#818cf8"},children:"\uD83E\uDD16 Auto-Group"})]})]}),(0,a.jsxs)("div",{className:"px-4 pb-3 flex items-center gap-4 text-[11px]",style:{borderTop:"1px solid ".concat(c?"rgba(75,85,99,0.15)":"rgba(229,231,235,0.5)"),paddingTop:10,color:c?"#4b5563":"#9ca3af"},children:[(0,a.jsx)("span",{children:"\uD83D\uDCA1 Each line = 1 node"}),(0,a.jsx)("span",{children:"\uD83C\uDFAF Drag to organize"}),(0,a.jsx)("span",{children:"\uD83E\uDD16 Auto-groups by topic"})]})]})})}function S(){let{data:e,getNodes:t}=u(),l=e.settings.darkMode,o=t(),n=function(e){let t=e.filter(e=>!e.isRoot&&void 0!==e.completed);return 0===t.length?0:Math.round(t.filter(e=>!0===e.completed).length/t.length*100)}(o),r=2*Math.PI*38,s=o.filter(e=>!0===e.completed).length,i=o.filter(e=>void 0!==e.completed).length,d=o.filter(e=>e.estimatedTime).reduce((e,t)=>e+(t.estimatedTime||0),0);return(0,a.jsx)("div",{className:"absolute bottom-20 left-1/2 -translate-x-1/2 z-20",style:{pointerEvents:"none"},children:(0,a.jsxs)("div",{className:"flex items-center gap-5 px-6 py-4 rounded-2xl",style:{background:l?"rgba(10,12,20,0.94)":"rgba(255,255,255,0.94)",border:"1px solid ".concat(l?"rgba(245,158,11,0.2)":"rgba(245,158,11,0.15)"),backdropFilter:"blur(16px)",boxShadow:"0 16px 48px rgba(0,0,0,0.25)",pointerEvents:"all"},children:[(0,a.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,a.jsxs)("svg",{width:"90",height:"90",className:"-rotate-90",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"planGrad",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#6366f1"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#10b981"})]})}),(0,a.jsx)("circle",{cx:"45",cy:"45",r:38,fill:"none",strokeWidth:"8",stroke:l?"rgba(75,85,99,0.25)":"rgba(229,231,235,0.5)"}),(0,a.jsx)("circle",{cx:"45",cy:"45",r:38,fill:"none",strokeWidth:"8",stroke:"url(#planGrad)",strokeLinecap:"round",strokeDasharray:r,strokeDashoffset:r-n/100*r,style:{transition:"stroke-dashoffset 0.6s ease",filter:"drop-shadow(0 0 6px rgba(99,102,241,0.6))"}})]}),(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,a.jsxs)("div",{className:"text-lg font-black",style:{color:"#6366f1"},children:[n,"%"]}),(0,a.jsx)("div",{className:"text-[9px] font-medium text-gray-500",children:"done"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold text-sm mb-1",style:{color:l?"#f3f4f6":"#111827"},children:"Today's Plan"}),(0,a.jsxs)("div",{className:"text-xs text-gray-400 mb-3",children:[s,"/",i," tasks \xb7 ",Math.floor(d/60),"h ",d%60,"m"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:[{label:"Morning",color:"#f59e0b",icon:"\uD83C\uDF05"},{label:"Afternoon",color:"#3b82f6",icon:"☀️"},{label:"Evening",color:"#8b5cf6",icon:"\uD83C\uDF07"},{label:"Someday",color:"#6b7280",icon:"\uD83C\uDF19"}].map(e=>{let t=o.filter(t=>{let l=o.find(e=>e.id===t.parentId);return(null==l?void 0:l.label)===e.label}).length;return(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{background:e.color}}),(0,a.jsxs)("span",{className:"text-[11px]",style:{color:l?"#9ca3af":"#6b7280"},children:[e.icon," ",e.label," (",t,")"]})]},e.label)})})]})]})})}function M(){let{selectedNodeId:e,data:t,updateNode:l,getNodeById:o,activeMode:n}=u(),r=t.settings.darkMode,s=e?o(e):null;if(!s||"goals"!==n||s.isRoot||!s.targetValue)return null;let i=f(s.currentValue||0,s.targetValue),d=2*Math.PI*34;return(0,a.jsx)("div",{className:"absolute right-4 top-4 z-20 w-64",style:{pointerEvents:"all"},children:(0,a.jsxs)("div",{className:"rounded-2xl overflow-hidden shadow-2xl",style:{background:r?"rgba(10,12,20,0.97)":"rgba(255,255,255,0.97)",border:"2px solid ".concat(s.color,"44"),backdropFilter:"blur(16px)"},children:[(0,a.jsxs)("div",{className:"px-4 py-3 flex items-center gap-2",style:{background:"".concat(s.color,"15"),borderBottom:"1px solid ".concat(s.color,"22")},children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{background:s.color,boxShadow:"0 0 8px ".concat(s.color)}}),(0,a.jsx)("span",{className:"font-bold text-sm truncate",style:{color:s.color},children:s.label})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("svg",{width:"84",height:"84",className:"-rotate-90",children:[(0,a.jsx)("circle",{cx:"42",cy:"42",r:34,fill:"none",strokeWidth:"8",stroke:r?"rgba(75,85,99,0.25)":"rgba(229,231,235,0.5)"}),(0,a.jsx)("circle",{cx:"42",cy:"42",r:34,fill:"none",strokeWidth:"8",stroke:s.color,strokeLinecap:"round",strokeDasharray:d,strokeDashoffset:d-i/100*d,style:{transition:"stroke-dashoffset 0.6s ease",filter:"drop-shadow(0 0 8px ".concat(s.color,"99)")}})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:(0,a.jsxs)("div",{className:"text-2xl font-black",style:{color:s.color},children:[i,"%"]})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[(0,a.jsxs)("div",{className:"rounded-xl p-2.5 text-center",style:{background:"".concat(s.color,"15")},children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-0.5",children:"Current"}),(0,a.jsx)("div",{className:"font-black text-base",style:{color:s.color},children:(s.currentValue||0).toLocaleString()})]}),(0,a.jsxs)("div",{className:"rounded-xl p-2.5 text-center",style:{background:r?"rgba(22,25,38,0.5)":"rgba(249,250,251,0.5)"},children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-0.5",children:"Target"}),(0,a.jsx)("div",{className:"font-black text-base",style:{color:r?"#f3f4f6":"#111827"},children:s.targetValue.toLocaleString()})]})]}),(0,a.jsx)("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider block mb-1.5",children:"Update Current"}),(0,a.jsx)("input",{type:"number",defaultValue:s.currentValue||0,className:"w-full px-3 py-2 rounded-xl text-sm outline-none",style:{background:r?"rgba(22,25,38,0.8)":"rgba(249,250,251,0.8)",border:"1px solid ".concat(s.color,"44"),color:r?"#f3f4f6":"#111827"},onBlur:e=>l(s.id,{currentValue:Number(e.target.value)}),onKeyDown:e=>{"Enter"===e.key&&l(s.id,{currentValue:Number(e.target.value)})}})]})]})})}function I(){let{selectedNodeId:e,data:t,updateNode:l,getNodeById:n,activeMode:r}=u(),s=t.settings.darkMode,i=e?n(e):null,[d,c]=(0,o.useState)(""),[x,b]=(0,o.useState)("");if((0,o.useEffect)(()=>{c((null==i?void 0:i.notes)||"")},[null==i?void 0:i.id]),!i||"knowledge"!==r||i.isRoot)return null;let p=e=>{let t=e.trim().replace(/^#/,"");if(!t)return;let a=i.tags||[],o=a.includes(t)?a:[...a,t];l(i.id,{tags:o}),b("")},g=e=>{l(i.id,{tags:(i.tags||[]).filter(t=>t!==e)})};return(0,a.jsx)("div",{className:"absolute right-4 top-4 z-20 w-72",style:{pointerEvents:"all"},children:(0,a.jsxs)("div",{className:"rounded-2xl overflow-hidden shadow-2xl",style:{background:s?"rgba(10,12,20,0.97)":"rgba(255,255,255,0.97)",border:"2px solid ".concat(i.color,"44"),backdropFilter:"blur(16px)"},children:[(0,a.jsxs)("div",{className:"px-4 py-3 flex items-center gap-2",style:{background:"".concat(i.color,"15"),borderBottom:"1px solid ".concat(i.color,"22")},children:[(0,a.jsx)("span",{className:"text-base",children:"\uD83D\uDCDD"}),(0,a.jsx)("div",{className:"font-bold text-sm truncate",style:{color:i.color},children:i.label})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider block mb-1.5",children:"Notes"}),(0,a.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),onBlur:()=>l(i.id,{notes:d}),placeholder:"Write your notes here...",rows:6,className:"w-full resize-none rounded-xl p-3 text-sm outline-none",style:{background:s?"rgba(22,25,38,0.9)":"rgba(249,250,251,0.9)",border:"1px solid ".concat(i.color,"33"),color:s?"#e5e7eb":"#111827",lineHeight:1.6}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider block mb-1.5",children:"Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5 mb-2 min-h-[24px]",children:(i.tags||[]).map(e=>(0,a.jsxs)("span",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium",style:{background:"".concat(i.color,"22"),color:i.color},children:["#",e,(0,a.jsx)("button",{onClick:()=>g(e),className:"leading-none opacity-60 hover:opacity-100 transition-opacity font-bold",children:"\xd7"})]},e))}),(0,a.jsx)("input",{type:"text",placeholder:"Add tag (Enter)…",value:x,onChange:e=>b(e.target.value),onKeyDown:e=>{("Enter"===e.key||","===e.key)&&(e.preventDefault(),p(x))},className:"w-full px-2.5 py-1.5 rounded-lg text-xs outline-none",style:{background:s?"rgba(22,25,38,0.9)":"rgba(249,250,251,0.9)",border:"1px solid ".concat(s?"rgba(75,85,99,0.3)":"rgba(209,213,219,0.5)"),color:s?"#e5e7eb":"#111827"}})]}),(0,a.jsx)("button",{onClick:()=>l(i.id,{notes:d}),className:"w-full py-2 rounded-xl text-sm font-bold text-white transition-all hover:opacity-90 active:scale-95",style:{background:"linear-gradient(135deg, ".concat(i.color,", ").concat(i.color,"cc)"),boxShadow:"0 4px 12px ".concat(i.color,"44")},children:"Save Notes"})]})]})})}let E={urgent:"#ef4444",high:"#f97316",normal:"#6366f1",low:"#6b7280"};function _(){let{data:e,updateNode:t,setSelectedNode:l,deleteNode:n,activeMode:r}=u(),[s,i]=(0,o.useState)(!1),d=e.settings.darkMode;if("tasks"!==r)return null;let c=e.tasks.nodes.filter(e=>!e.isRoot&&e.status);e.tasks.nodes.filter(t=>{var l,a;return!t.isRoot&&!(null===(l=t.parentId)||void 0===l?void 0:l.includes("root"))&&(null===(a=e.tasks.nodes.find(e=>e.isRoot))||void 0===a?void 0:a.id)===t.parentId});let x=[...c].sort((e,t)=>{let l="urgent"===e.priority?4:"high"===e.priority?3:"normal"===e.priority?2:1,a="urgent"===t.priority?4:"high"===t.priority?3:"normal"===t.priority?2:1,o=p(e.deadline)?1:0;return(p(t.deadline)?1:0)-o||a-l}),b=x.filter(e=>"done"===e.status).length,f=x.length?Math.round(b/x.length*100):0;return(0,a.jsxs)("div",{className:"absolute bottom-6 right-6 z-20",style:{pointerEvents:"all"},children:[(0,a.jsxs)("button",{onClick:()=>i(!s),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl font-bold text-sm text-white shadow-lg transition-all hover:scale-105 active:scale-95 mb-2 ml-auto",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 4px 16px rgba(99,102,241,0.4)"},children:[(0,a.jsx)("span",{children:"\uD83D\uDCCB"}),(0,a.jsx)("span",{children:"Task List"}),x.filter(e=>p(e.deadline)&&"done"!==e.status).length>0&&(0,a.jsx)("span",{className:"w-5 h-5 rounded-full bg-red-500 flex items-center justify-center text-[10px] font-black",children:x.filter(e=>p(e.deadline)&&"done"!==e.status).length})]}),s&&(0,a.jsxs)("div",{className:"rounded-2xl overflow-hidden shadow-2xl animate-fade-in",style:{width:320,maxHeight:480,background:d?"rgba(10,12,20,0.97)":"rgba(255,255,255,0.97)",border:"1px solid ".concat(d?"rgba(99,102,241,0.2)":"rgba(99,102,241,0.12)"),backdropFilter:"blur(16px)",display:"flex",flexDirection:"column"},children:[(0,a.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",style:{background:"linear-gradient(135deg, rgba(99,102,241,0.15), rgba(139,92,246,0.08))",borderBottom:"1px solid rgba(99,102,241,0.15)"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold text-sm",style:{color:"#818cf8"},children:"All Tasks"}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[b,"/",x.length," done \xb7 ",f,"% complete"]})]}),(0,a.jsx)("div",{className:"w-16 h-1.5 rounded-full overflow-hidden",style:{background:"rgba(75,85,99,0.3)"},children:(0,a.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(f,"%"),background:"linear-gradient(90deg, #6366f1, #10b981)",transition:"width 0.5s ease"}})})]}),(0,a.jsx)("div",{className:"overflow-y-auto flex-1",children:0===x.length?(0,a.jsx)("div",{className:"p-6 text-center text-sm text-gray-500",children:"No tasks yet. Right-click the canvas to add one."}):x.map(e=>{let o=p(e.deadline)&&"done"!==e.status;return(0,a.jsxs)("div",{className:"px-4 py-2.5 border-b flex items-start gap-3 cursor-pointer transition-colors",style:{borderColor:d?"rgba(75,85,99,0.12)":"rgba(229,231,235,0.4)",background:o?"rgba(239,68,68,0.04)":"transparent"},onClick:()=>{l(e.id)},onMouseEnter:e=>e.currentTarget.style.background=d?"rgba(75,85,99,0.1)":"rgba(243,244,246,0.8)",onMouseLeave:e=>e.currentTarget.style.background=o?"rgba(239,68,68,0.04)":"transparent",children:[(0,a.jsx)("button",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 mt-0.5 transition-all hover:scale-110",style:{borderColor:"done"===e.status?"#10b981":"doing"===e.status?"#f59e0b":"#6b7280",background:"done"===e.status?"#10b981":"transparent"},onClick:l=>{l.stopPropagation(),t(e.id,{status:"done"===e.status?"todo":"done"})},children:"done"===e.status&&(0,a.jsx)("span",{className:"text-white text-[8px] font-black",children:"✓"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-medium truncate",style:{color:"done"===e.status?"#6b7280":d?"#e5e7eb":"#111827",textDecoration:"done"===e.status?"line-through":"none"},children:e.label}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[e.priority&&(0,a.jsx)("span",{className:"text-[9px] font-bold uppercase px-1.5 py-0.5 rounded-full",style:{background:"".concat(E[e.priority],"22"),color:E[e.priority]},children:e.priority}),e.deadline&&(0,a.jsx)("span",{className:"text-[10px]",style:{color:o?"#f87171":"#6b7280"},children:g(e.deadline)})]})]}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full mt-1.5 flex-shrink-0",style:{background:e.color}})]},e.id)})})]})]})}let T={tasks:"✓ Task Board",braindump:"\uD83E\uDDE0 Brain Dump",planner:"\uD83D\uDCC5 Daily Planner",goals:"\uD83C\uDFAF Goal Tracker",knowledge:"\uD83D\uDCDA Knowledge Base"};function R(){let{isSaving:e,lastSaved:t}=function(){let e=u(e=>e.data),[t,l]=(0,o.useState)(null),[a,n]=(0,o.useState)(!1),r=(0,o.useRef)();return(0,o.useEffect)(()=>{if(e.settings.autoSave)return clearTimeout(r.current),r.current=setTimeout(()=>{n(!0),setTimeout(()=>{l(new Date),n(!1)},400)},5e3),()=>clearTimeout(r.current)},[e]),{lastSaved:t,isSaving:a}}(),l=u(e=>e.data.settings.darkMode);if(!e&&!t)return null;let n=t?10>Math.round((Date.now()-t.getTime())/1e3)?"just now":"".concat(Math.round((Date.now()-t.getTime())/1e3),"s ago"):"";return(0,a.jsx)("div",{className:"absolute bottom-6 left-6 flex items-center gap-2 px-3 py-1.5 rounded-xl text-xs z-10",style:{background:l?"rgba(10,12,20,0.9)":"rgba(255,255,255,0.9)",border:"1px solid ".concat(l?"rgba(75,85,99,0.25)":"rgba(229,231,235,0.6)"),backdropFilter:"blur(8px)",color:l?"#6b7280":"#9ca3af"},children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-3 h-3 border-2 border-violet-500 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Saving…"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),(0,a.jsxs)("span",{children:["Saved ",n]})]})})}function F(){let{data:e,activeMode:t,selectedNodeId:l}=u(),n=e.settings.darkMode;(0,o.useEffect)(()=>{document.body.style.background=n?"#0a0c14":"#f8fafc",document.body.style.color=n?"#f3f4f6":"#111827"},[n]);let r=("tasks"===t||"planner"===t)&&l;return(0,a.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",style:{background:n?"#0a0c14":"#f8fafc"},children:[(0,a.jsx)(b,{}),(0,a.jsxs)("div",{className:"flex flex-1 overflow-hidden min-h-0",children:[(0,a.jsx)(h,{}),(0,a.jsxs)("main",{className:"flex-1 relative overflow-hidden min-w-0",children:[(0,a.jsx)(k,{}),"braindump"===t&&(0,a.jsx)(C,{}),"planner"===t&&(0,a.jsx)(S,{}),"knowledge"===t&&l&&(0,a.jsx)(I,{}),"goals"===t&&l&&(0,a.jsx)(M,{}),r&&(0,a.jsx)(w,{}),(0,a.jsx)(_,{}),(0,a.jsx)(R,{}),(0,a.jsx)("div",{className:"absolute top-4 left-4 px-3 py-1.5 rounded-full text-xs font-bold z-10 select-none",style:{background:n?"rgba(10,12,20,0.85)":"rgba(255,255,255,0.85)",border:"1px solid rgba(99,102,241,0.25)",color:"#818cf8",backdropFilter:"blur(8px)",boxShadow:"0 2px 8px rgba(99,102,241,0.15)"},children:T[t]})]})]}),(0,a.jsx)(D,{})]})}}},function(e){e.O(0,[54,971,117,744],function(){return e(e.s=3042)}),_N_E=e.O()}]);